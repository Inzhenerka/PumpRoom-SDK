<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>LMS Demo</title>
  <script src="../dist/pumproom-sdk.umd.js"></script>
</head>
<body>
  <h1>LMS Demo</h1>
  <iframe
    src="https://pumproom.inzhenerka-cloud.com/?repo_name=Demo-Pumping&task_name=_helper"
    height="600px" width="100%"
    allow="clipboard-write; fullscreen;"
  ></iframe>
  <script>
    function getDemoTildaProfile() {
      return {
        courses: [{
          alias: 'demo_user_course',
          name: 'demo_user_course',
          created: new Date(2024, 0, 1, 0, 0, 0)
        }],
        istutor: false,
        lang: 'ru',
        login: 'demo_user@inzhenerka.tech',
        name: 'demo_user',
        projectid: '000000'
      };
    }

    window.tma__getProfileObjFromLS = getDemoTildaProfile;

    PumpRoomSdk.init({
      authUrl: 'https://pumproom-api.inzhenerka-cloud.com/tracker/authenticate',
      apiKey: 'demo',
      allowedOrigins: ['https://pumproom.inzhenerka-cloud.com']
    });

    PumpRoomSdk.authenticate();

    PumpRoomSdk.onMessage(function(msg, ev) {
      if (msg.type === 'getPumpRoomUser') {
        PumpRoomSdk.sendUser(ev.source, ev.origin);
      }
    });
  </script>
</body>
</html>
